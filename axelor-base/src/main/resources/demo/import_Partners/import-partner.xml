<?xml version="1.0" encoding="UTF-8"?>
<csv-inputs xmlns="http://axelor.com/xml/ns/data-import"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/data-import http://axelor.com/xml/ns/data-import/data-import_5.4.xsd">

  <!-- IMPORT DU PACKAGE 'BASE' -->


  <input file="base_partnerCategory.csv" separator=";"
    type="com.axelor.apps.base.db.PartnerCategory" search="self.importId = :importId"/>




  <input file="base_partner.csv" separator=";" type="com.axelor.apps.base.db.Partner"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportPartner:importPartner">
    
    <bind to="isContact" eval="isContact == 'true' ? true : false"/>
    <bind to="isCustomer" eval="isCustomer == 'true' ? true : false"/>
    <bind to="isSupplier" eval="isSupplier == 'true' ? true : false"/>
    <bind to="language" search="self.code = :languageCode"/>


   

    <bind to="partnerSeq"
      eval="call:com.axelor.apps.base.service.administration.SequenceService:getSequenceNumber(com.axelor.apps.base.db.repo.SequenceRepository.PARTNER)"/>
    
    <bind to="emailAddress" if="email &amp;&amp; email.trim() != ''"
      search="self.partner.importId = :importId">
      <bind to="address" column="email"/>
      
    </bind>

    <bind to="partnerAddressList" search="self.address.importId = :address"
      if="address != null &amp;&amp; isContact == 'false'">
      <bind to="address" search="self.importId = :address" update="true"/>
      <bind to="isInvoicingAddr" eval="true"/>
      <bind to="isDeliveryAddr" eval="true"/>
      <bind to="isDefaultAddr" eval="true"/>
    </bind>

    <bind to="mainAddress" search="self.importId = :address"
      if="address != null &amp;&amp; isContact == 'true'" update="true"/>
    <bind to="inPaymentMode" column="inPaymentMode.importId" if="false"/>
    <bind to="outPaymentMode" column="outPaymentMode.importId" if="false"/>
    <bind to="paymentCondition" column="paymentCondition.importId" if="false"/>


    <bind to="companySet" search="self.importId = :companySet_importId"/>

    <!-- for account names with spaces inside -->
    <bind to="accountingSituationList" search="self.company.importId = :companySet_importId" if="companySet_importId != null">
      <bind to="company" search="self.importId = :companySet_importId"/>
      <bind to="supplierAccount" search="self.name = :name"/>
    </bind>

    <!-- for account names without spaces inside -->
     <bind to="accountingSituationList" search="self.company.importId = :companySet_importId" if="companySet_importId != null">
      <bind to="supplierAccount" search="self.code = :supplierAccount_code"/>
    </bind>

    <bind column="email" to="email"/>
    <bind to="language" search="self.code = :languageCode"/>

 

  </input>


</csv-inputs>

