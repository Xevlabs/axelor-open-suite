<?xml version="1.0" encoding="UTF-8"?>
<csv-inputs xmlns="http://axelor.com/xml/ns/data-import"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/data-import http://axelor.com/xml/ns/data-import/data-import_5.4.xsd">



  <input file="base_productFamily.csv" separator=";"
    type="com.axelor.apps.base.db.ProductFamily" search="self.code = :code"/>

  <input file="base_productCategory.csv" separator=";"
    type="com.axelor.apps.base.db.ProductCategory" search="self.code = :code"/>


  <input file="base_product.csv" separator=";" type="com.axelor.apps.base.db.Product"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportProduct:importProduct">
    
    <bind to="startDate" eval="call:com.axelor.csv.script.ImportDateTime:importDate(startDate)"
      column="startDate"/>
    
    <bind to="createdOn" eval="call:com.axelor.csv.script.ImportDateTime:importDate(startDate)"
      column="startDate"/>
    
    <bind to="netMass" eval="1" if="productTypeSelect == 'storable'"/>
    
    <bind to="grossMass" eval="1" if="productTypeSelect == 'storable'"/>
    
    <bind to="massUnit" search="self.labelToPrinting = 'kg'"
      if="productTypeSelect == 'storable'"/>

    <bind to="isShippingCostsProduct" column="isShippingCostsProduct"
      eval="isShippingCostsProduct ? isShippingCostsProduct : 'false'"/>

    <bind to="isShippingCostsProduct" column="isShippingCostsProduct"
      eval="isShippingCostsProduct ? isShippingCostsProduct : 'false'"/>


    <bind to="name" column="name"/>
    <bind to="code" column="code"/>
    

    <!-- unit -->
    <!--<bind to="name" column="name"/>-->




  </input>



  <input file="account_accountManagement.csv" separator=";"
    type="com.axelor.apps.account.db.AccountManagement" search="self.importId = :importId">
    <bind search="self.importId = :company_id" to="company" update="true"/>
    <bind search="self.code = :cashAccount_code and self.company.importId = :company_id"
      to="cashAccount" update="true" if="cashAccount_code"/>
    <bind search="self.code = :saleAccount_code and self.company.importId = :company_id"
      to="saleAccount" update="true" if="saleAccount_code"/>
    <bind search="self.code = :purchaseAccount_code and self.company.importId = :company_id"
      to="purchaseAccount" update="true" if="purchaseAccount_code"/>
    <bind search="self.importId = :sequence_importId and self.company.importId = :company_id"
      to="sequence" update="true" if="sequence_importId"/>
    <bind search="self.importId = :journal_importId and self.company.importId = :company_id"
      to="journal" update="true" if="journal_importId"/>
    <bind search="self.importId = :bankDetails_importId" to="bankDetails" update="true"
      if="bankDetails_importId"/>
  </input>



  <!-- Binding product with associated AcccountManagement reference -->

   <input file="base_product.csv" separator=";" type="com.axelor.apps.base.db.Product"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportProduct:importProduct" update="true">
    
     <bind to="accountManagementList" search="self.product.importId = :importId" if="importId != null">
      <bind to="product" search="self.importId = :importId"/>
    </bind>
    

  </input>


</csv-inputs>

